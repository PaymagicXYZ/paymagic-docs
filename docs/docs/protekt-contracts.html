<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Protekt Contracts · Protekt Protocol Docs</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# Protekt Contracts"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Protekt Contracts · Protekt Protocol Docs"/><meta property="og:type" content="website"/><meta property="og:url" content="https://corbinpage.github.io/protekt-protocol-docs/"/><meta property="og:description" content="# Protekt Contracts"/><meta property="og:image" content="https://corbinpage.github.io/protekt-protocol-docs/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://corbinpage.github.io/protekt-protocol-docs/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/protekt-protocol-docs/../img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/protekt-protocol-docs/js/scrollSpy.js"></script><link rel="stylesheet" href="/protekt-protocol-docs/css/main.css"/><script src="/protekt-protocol-docs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/protekt-protocol-docs/"><img class="logo" src="/protekt-protocol-docs/../img/protekt-logo.png" alt="Protekt Protocol Docs"/><h2 class="headerTitleWithLogo">Protekt Protocol Docs</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/protekt-protocol-docs/docs/home" target="_self">Docs</a></li><li class=""><a href="/protekt-protocol-docs/docs/incentives" target="_self">Incentives</a></li><li class=""><a href="/protekt-protocol-docs/docs/resources" target="_self">Resources</a></li><li class=""><a href="https://github.com/corbinpage/protekt-protocol-docs" target="_blank">GitHub</a></li><li class=""><a target="_self"></a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Protekt Contracts</h1></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="protekt-contracts"></a><a href="#protekt-contracts" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Protekt Contracts</h1>
<p>Protekt contracts are configurable insurance contracts that create a P2P market for cover and liability on top of ANY smart contract, whether it's a lending pool, market making pool, staking pool, etc. Similar to how Uniswap allows anyone to create a spot market for any token, Protekt contracts allows anyone to create an insurance market for any smart contract.</p>
<p>Each Protekt contract is a two-sided market for insurees to cover their position in a DeFi protocol, and insurers to take on that liability in tokenized form. Each contract conforms to the same generalizable interface so that entering/exiting the market, receiving rewards, and submitting claims is consistent and can be snapped together with other money legos.</p>
<h2><a class="anchor" aria-hidden="true" id="creating-a-protekt-contract"></a><a href="#creating-a-protekt-contract" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating a Protekt Contract</h2>
<p>The parameters for creating a Protekt contract are:</p>
<ul>
<li><code>underlyingToken</code> - Address of the insured token (i.e. cDAI on Compound)</li>
<li><code>feeModel</code> - Contract address that specifies the fee model for the contract</li>
<li><code>depositToken</code> - The token that's staked by shield miners (normally ETH, DAI, or USDC)</li>
<li><code>investmentStrategy</code> - Contract address for the strategy for the <code>depositToken</code></li>
<li><code>claimsManager</code> - Contract address for the claims process (conforming to <code>ClaimsManagerInterface.sol</code>)</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="underlying-token"></a><a href="#underlying-token" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Underlying Token</h3>
<p>The address of the underlying token that should be insured. For instance, it'd be the cDAI contract <code>0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643</code> to insure DAI in Compound or the DAI&lt;&gt;ETH LP Token (<code>0x1f9840a85d5af5bf1d1762f925bdaddc4201f984</code>) on Uniswap.</p>
<h3><a class="anchor" aria-hidden="true" id="fee-model"></a><a href="#fee-model" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fee Model</h3>
<p>Each Protekt contract will point to a <code>feeModel</code> contract, which specifies the premiums that insurees pay for coverage. Encapsulating the logic in a separate smart contract allows the model to be adjusted over time and even switched out if needed.</p>
<h3><a class="anchor" aria-hidden="true" id="deposit-token"></a><a href="#deposit-token" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deposit Token</h3>
<p>The reserve token for the market, which shield miners stake. Typically, this token is a reserve asset like ETH, DAI, or USDC. This token is invested for returns according to the <code>investmentStrategy</code> contract.</p>
<h3><a class="anchor" aria-hidden="true" id="investment-strategy"></a><a href="#investment-strategy" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Investment Strategy</h3>
<p>Borrowed from <a href="https://yearn.finance/">yearn</a>, the staked deposit token can be invested via a configurable strategy. The simplest strategy is just to hold the token, but the capital could be actively or passively managed as well, for instance, used to collect trading fees on Balancer.</p>
<h3><a class="anchor" aria-hidden="true" id="claims-manager"></a><a href="#claims-manager" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Claims Manager</h3>
<p>Each Protekt contract will point to a <code>claimsManager</code> contract, which defines what constitutes a payout event, a claims investigation period, and the liquidation waterfall if a payout event occurs. Encapsulating the logic in a separate smart contract allows the process to be run by an programmable smart contract, a DAO, or a centralized party.</p>
<ol>
<li><code>submitClaim()</code> - Called to check for a <code>payoutEvent</code> and, if true, start the claims investigation period.</li>
<li>Claims investigation period - Payout events need to be true from begin the period and still true at the end of the period. The default period is 1 week (43,200 Blocks).</li>
<li><code>payoutClaim()</code> - Called after the claims investigation period and, if the payout event is still true, initiate liquidation of the staked capital for payouts.</li>
</ol>
<p><strong>In short, each insurance contract follows the same claims process but can be executed via programmatic rules, a DAO, or centralized party.</strong></p>
<p><img src="/img/claimsProcess.png" alt="Claims Process"></p>
<h4><a class="anchor" aria-hidden="true" id="payout-events"></a><a href="#payout-events" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Payout Events</h4>
<p>Payout events explicitly outline what executes the insurance contract. For instance, if a hack or financial exploit takes place on a protocol, obligations are greater than available collateral in the market. This condition can be measured with a smart contract query, so a Protekt contract could define that as a payout event. Alternatively, a DAO or centralized party could govern what is considered a payout event if human dependencies are desirable.</p>
<h4><a class="anchor" aria-hidden="true" id="liquidations"></a><a href="#liquidations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Liquidations</h4>
<p>If a claim is successfully made, the payouts will be made by liquidating the Protekt pool and, if necessary, the PKT Mothership Pool. This structure was inspired by a <a href="https://en.wikipedia.org/wiki/Distribution_waterfall">distribution waterfall </a> so that multiple buckets of capital can be set up to assume different amounts of liability to the underlying pool. Payouts can be made via <a href="https://www.investopedia.com/terms/p/paymentinkind.asp">payment-in-kind</a> or swapped and distributed in any token.</p>
<h2><a class="anchor" aria-hidden="true" id="architecture"></a><a href="#architecture" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Architecture</h2>
<p><img src="/img/smartContractArchitecture.png" alt="Smart"></p>
<h2><a class="anchor" aria-hidden="true" id="examples"></a><a href="#examples" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples</h2>
<p>Let's look at some examples to see what can be built:</p>
<ol>
<li>Protekt cDai - Protect DAI deposits in Compound</li>
<li>DAO treasury coverage - Protect the treasury of a project from being drained</li>
<li>Simple Uniswap LP coverage - Protect LP shares from being drained or wild swings</li>
<li>Audit Firm coverage (centralized) - Audit firm stakes that a project is secure technically and is paid ongoing fees</li>
</ol>
<table>
<thead>
<tr><th>Name</th><th>Coverage Cost</th><th>Shield Mining</th><th>Claims &amp; Payout</th></tr>
</thead>
<tbody>
<tr><td>Protekt cDai</td><td>Users can deposit cDAI from Compound and get 1:1 pcDAI back. The only difference is that pcDAI only earned 80-90% of COMP rewards. The other 10-20% goes to the shield miners.</td><td>Shield miners deposit ETH and can withdraw at any time. They earn 10-20% COMP rewards on their stake but get liquidated if a payout event occurs.</td><td>Anyone can submit a claim and if a payout event has occurred, then the pool enters the investigation period where coverage and staking withdrawals are frozen. After the claim investigation period, if the payout event is still true, the Shield Mining contract is liquidated and ETH is claimable by pcDAI holders.</td></tr>
<tr><td>Protekt aUSDC</td><td>Users can deposit aUSDC from Aave and get 1:1 paUSDC back. There’s a 0.1% fee when deposited and withdrawn.</td><td>Shield miners deposit USDC and can withdraw at any time. They earn all deposit and withdrawal fees on their stake but get liquidated if a payout event occurs.</td><td>Anyone can submit a claim and if a payout event has occurred, then the pool enters the investigation period where coverage and staking withdrawals are frozen. After the claim investigation period, if the payout event is still true, the Shield Mining contract is liquidated and ETH is claimable by paUSD holders.</td></tr>
<tr><td>Simple Uniswap LP coverage</td><td>Users can deposit Uniswap LP tokens and get 1:1 pLPtokens back. The only difference is that pLPtokens only earned 80% of UNI rewards.</td><td>Shield miners deposit ETH and can withdraw at any time. They earn 20% UNI rewards on their stake but get liquidated if a payout event occurs.</td><td>Anyone can submit a claim and if a payout event has occurred, then the pool enters the investigation period where coverage and staking withdrawals are frozen. After the claim investigation period, if the payout event is still true, the Shield Mining contract is liquidated and ETH is claimable by pLPtokens holders.</td></tr>
<tr><td>DAO treasury coverage</td><td>Users can deposit their pooled token (xtoken) and get 1:1 pxtoken back. The protocol DAO pays a percentage of protocol rewards to the Protekt contract per block.</td><td>Shield miners deposit ETH and can withdraw at any time. They earn a portion of the protocol rewards for assuming the liability of the treasury.</td><td>Anyone can submit a claim and if a payout event has occurred, then the pool enters the investigation period where coverage and staking withdrawals are frozen. After the claim investigation period, if the payout event is still true, the Shield Mining contract is liquidated and ETH is claimable by pxtoken holders.</td></tr>
</tbody>
</table>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#creating-a-protekt-contract">Creating a Protekt Contract</a><ul class="toc-headings"><li><a href="#underlying-token">Underlying Token</a></li><li><a href="#fee-model">Fee Model</a></li><li><a href="#deposit-token">Deposit Token</a></li><li><a href="#investment-strategy">Investment Strategy</a></li><li><a href="#claims-manager">Claims Manager</a></li></ul></li><li><a href="#architecture">Architecture</a></li><li><a href="#examples">Examples</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/protekt-protocol-docs/" class="nav-home"><img src="/protekt-protocol-docs/../img/protekt-logo.png" alt="Protekt Protocol Docs" width="66" height="58"/></a><div><h5>Docs</h5><a href="/protekt-protocol-docs/docs/doc1.html">Getting Started (or other categories)</a><a href="/protekt-protocol-docs/docs/doc2.html">Guides (or other categories)</a><a href="/protekt-protocol-docs/docs/doc3.html">API Reference (or other categories)</a></div><div><h5>Community</h5><a href="/protekt-protocol-docs/users">User Showcase</a><a href="https://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/protekt-protocol-docs/blog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://opensource.facebook.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/protekt-protocol-docs/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2020 Protekt Protocol</section></footer></div></body></html>